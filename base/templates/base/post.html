{% extends 'base.html' %}

{% block content %}

{{post.title}}<br>
{{post.user.username}}<br>
<img src="{{post.picture.url}}"><br>
Likes: {{post.likes.count}} Favorites: {{post.favorites.count}}<br>
{% if request.user not in post.likes.all %}
    <a href="{% url 'like' post.id 'post' %}" >Like</a>
{% else %}
    <a href="{% url 'like' post.id 'post' %}" >Unlike</a>
{% endif %}

&nbsp &nbsp &nbsp &nbsp

{% if request.user not in post.favorites.all %}
    <a href="{% url 'favorite' post.id %}" >Favorite</a><br>
{% else %}
    <a href="{% url 'favorite' post.id %}" >Unfavorite</a><br>
{% endif %}

Description
{{post.description}}<hr>
tags<br>
{% for tag in post.tags.all %}
    <a href="{% url 'home' %}?q={{tag.name}}">{{tag.name}}</a>
{% endfor %}<hr>


Comments
<form method="POST" action="">
    {% csrf_token %}
    <input id="comment-box" type="text" name="comment" maxlength="200" size="50" placeholder="Add your comment here...">
    <input type="Submit" value="Add Comment">
</form><br>
{% for comment in comments %}
<div class="comments-container">
    {% for path in comment.depth|make_list %} 
        <div class="comment-tab-item">
        {% if forloop.last %}
        &nbsp &nbsp â†³ &nbsp &nbsp
        {% else %}
        &nbsp &nbsp | &nbsp &nbsp 
        {% endif %}
        </div>
    {% endfor %}
    <div class="comment-item">
        <div>
            {{comment.user.username}}: {{comment.body}} - {{comment.created|timesince}} 
            {% if request.user == comment.user %}
            <a href="{% url 'delete' comment.id 'comment' %}"><button>DELETE</button></a>
            {% endif %}
            <input class="reply-button" id="{{forloop.counter0}}" type="Button" value="REPLY">
        </div>
    
        <div class="reply-form" id="reply-form-{{forloop.counter0}}" style="display: none;">
        <form method="POST" action="{% url 'reply' post.id comment.id %}">
            {% csrf_token %}
            <input id="reply-box" type="text" name="reply" maxlength="200" size="50" placeholder="Add your reply here...">
            <input class='hide-reply-button' type="Button" value="CANCEL">
            <input type="Submit" value="Add Reply">
        </form>
        </div>
    </div>
</div>
{% endfor %}

{% endblock %}